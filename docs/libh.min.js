var{toPrimitive:s}=Symbol,g=void 0;var{Array:{from:le,isArray:$},Object:{assign:ae,defineProperty:j,freeze:w},Symbol:{dispose:I},globalThis:F}=globalThis,L=F.requestAnimationFrame,N=Symbol.for("PTR_IDENTIFIER"),H={[I](){}},k={into(e){let t=p(void 0);return this.watch(o=>t.$=o),t}},z={to(e,t,o){if(!L)return this}},G={},U=e=>e,W=function*(e=52){let t;for(let o=0;o<e;o++)t=Math.floor(Math.random()*31),yield 127+t+(t>141)+(t>156)},S={},p=(e,t=U,o)=>{let i=_+(o?.name||""),l=Symbol(i),a=r=>n.get(r)?void 0:r(e),u=r=>{e=r,m.forEach(a)},m=[],b=new WeakMap,n=new WeakMap;return S[l]=w(Object.assign.apply(null,[{get setter(){return t},get $(){return e},set $(r){r=t(r),r instanceof Promise?r.then(u):e!==r&&(e=r,m.forEach(a))},[s](r){if(r===1){let d=Symbol(i);return S[d]=this,d}return r===N},watch(r){return r(e),b.set(r,m.push(r)-1),this},ignore:{set(r){n.set(r,!0)},delete(r){n.set(r,!1)}},abort(r){delete m[b.get(r)||-1]}},"number string".includes(typeof e)?k:g,typeof e=="number"?z:g,$(e)?G:g,I?H:g]))},_;for(;(_=String.fromCharCode(...W()))in globalThis;);j(globalThis,_,{value:e=>S[e],configurable:!1,enumerable:!1});var X=/["&'<>`]/g,Z={},q=e=>"&#x"+(Z[e]||=e.charCodeAt(0).toString(16))+";",R=16,M=Symbol.for("PTR_IDENTIFIER"),A=Symbol.for("HTML_IDENTIFIER"),v=function*(){for(let e=0;e<R;e++)yield Math.floor(Math.random()*26)+97},C=({s:e,v:t},o=[],i=[])=>{o[o.length-1]+=e[0],t.forEach((l,a)=>{l[s]?.(A)?(C(l,o,i),o[o.length-1]+=e[a+1]):"number string".includes(typeof l)?o[o.length-1]+=String(l).replaceAll(X,q)+e[a+1]:(i.push(l),o.push(e[a+1]))})},B=document.createDocumentFragment(),E=document.createElement("div"),K=new XPathEvaluator,Y={then(e){return Object.assign(this,{onloadCallbackFn:e}),delete this.then,this},[s](e){return e===A},[Symbol.iterator]:function*(){let e=[""],t=[];C(this,e,t);let o=e.join(""),i;for(;o.includes(i=String.fromCharCode(...v())););o=e.join(i);let l=Array.from(o.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*${i}`,"g")).map(({0:{length:n},index:r})=>r+n)),a=[],u=[],m=-1;E.innerHTML=o.replaceAll(i,(n,r)=>(m++,l.includes(r+R)?(a.push(m),n):(u.push(m),"<!--"+i+"-->"+i+"<!---->")));let b=K.evaluate(`//comment()[contains(.,'${i}')]`,E,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let n=0;n<u.length;n++){let r=b.snapshotItem(n);r.textContent="";let d=r.nextSibling;t[u[n]].watch(c=>d.textContent=c)}E.querySelectorAll(`[${i}]`).forEach((n,r)=>{let d=t[a[r]];Reflect.ownKeys(d).forEach(c=>{let f=d[c],x=typeof c;if(x==="symbol"){let h=globalThis[c.description.slice(0,52)]?.(c);if(!h?.[s]?.(M))return;h.$(f,n)}else if(x==="string")if(f[s]?.(M))if(c==="value"&&n instanceof HTMLInputElement){let h=T=>n.value=T;f.watch(h),n.addEventListener("input",({target:{value:T}})=>setTimeout(()=>{f.ignore.set(h),f.$=T,f.ignore.delete(h)}),{passive:!0})}else f.watch(h=>n[c]=h);else n[c]=f}),n.removeAttribute(i)});for(let n of E.childNodes)yield n}},fe=(e,...t)=>Object.freeze(Object.assign({s:e,v:t},Y));B.appendChild(E);var P="",J={},Q=p((e,t)=>Object.keys(e).forEach(o=>t.addEventListener(o,e[o],{passive:!0}))),y=new WeakMap,ue=new Proxy({},{get(e,t){return t===s||t==="$"?Q[s](1):(J[t]||=p((o,i)=>{P.includes(t)||(globalThis.addEventListener(t,l=>y.get(l.target)?.[t]?.forEach?.(a=>a(l)),{passive:!0}),P+=t+"\0"),y.has(i)||y.set(i,{}),(y.get(i)[t]||=[]).push(o)},void 0,{name:"on."+t}))[s](1)}});var V={},ee={},te=/[A-Z]{1}/g,re={},oe=e=>re[e]||="-"+e.toLowerCase(),D=e=>ee[e]||=e.replaceAll(te,oe),O=p((e,t)=>Object.keys(e).forEach(o=>t.attributeStyleMap.set(D(o),e[o]))),ne=()=>O[s](1),ye=new Proxy({},{get(e,t){return t===s?ne:t==="$"?O[s](1):(V[t]||=p((o,i)=>{i.attributeStyleMap.set(D(t),o)}))[s](1)}});export{p as $,ye as css,fe as h,ue as on};
