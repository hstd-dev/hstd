var{Array:{isArray:L},Object:{assign:I,defineProperty:$,freeze:Q},globalThis:C}=globalThis,U=C.requestAnimationFrame,j=Symbol.for("PTR_IDENTIFIER"),P={swap(e,t){let r=this[e];return this[e]=this[t],this[t]=r,this},swapOf(e,t){return this.swap(this.indexOf(e),this.indexOf(t))}},D={switch(){this.$=!this.$}},B=function(e){let t=u(void 0);return this.watch(r=>t.$=e(r)),t},H=e=>e,W=function*(e=52){let t;for(let r=0;r<e;r++)t=Math.floor(Math.random()*31),yield 127+t+(t>141)+(t>156)},T={},u=(e,t=H,r)=>{let f=E+(r?.name||""),m=Symbol(f),p=i=>o.get(i)?void 0:i(e),b=i=>{e=i,h.forEach(p)},h=[],a=[],c=new WeakMap,o=new WeakMap;return T[m]=L(e)?I(e,P):I({[Symbol.toPrimitive](i){return i===j},publish(){let i=Symbol(f);return T[i]=this,i},watch(i,n){if(n>=0){let s=setTimeout(()=>i(e),n)}else i(e);return c.set(i,{index:h.push(i)-1,timeout:n}),this},ignore:{set(i){o.set(i,!0)},delete(i){o.set(i,!1)}},abort(i){delete h[c.get(i).index||-1]},get setter(){return t},get $(){return e},set $(i){i=t(i),i instanceof Promise?i.then(b):e!==i&&(e=i,h.forEach(p))},into:B},typeof e=="boolean"?D:void 0)},E;for(;(E=String.fromCharCode(...W()))in globalThis;);$(globalThis,E,{value:e=>T[e],configurable:!1,enumerable:!1});var x=Symbol.for("PTR_IDENTIFIER"),S=Symbol.for("HTML_IDENTIFIER"),M=function*(e=16){for(let t=0;t<e;t++)yield Math.floor(Math.random()*26)+97},w=new WeakMap,O=({s:e,v:t,f:r})=>{let f=w.get(e);if(!f){let a=e.join(""),c;for(;a.includes(c=String.fromCharCode(...M())););a=e.join(c);let o=Array.from(a.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${c}`,"g")).map(({0:{length:s},index:d})=>d+s)),i={},n=document.createElement("div");k.appendChild(n),n.innerHTML=a.replaceAll(c,(s,d)=>{let l;for(;a.includes(l=String.fromCharCode(...M())););return(i[l]=o.includes(d+16))?l:`<br ${l}>`}),w.set(e,f={node:n,placeholder:i})}let{node:m,placeholder:p}=f,b=m.cloneNode(!0),h={};return Object.keys(p).forEach((a,c)=>{let o=b.querySelector(`[${a}]`),i=t[c];if(p[a])Reflect.ownKeys(i).forEach(n=>{let s=i[n],d=typeof n;if(d=="symbol"){let l=globalThis[n.description.slice(0,52)]?.(n);if(!l?.[Symbol.toPrimitive]?.(x))return;l.$(s,o)}if(d=="string")if(s[Symbol.toPrimitive]?.(x))if(n=="value"&&o instanceof HTMLInputElement){let l=y=>o.value=y;s.watch(l),o.addEventListener("input",({target:{value:y}})=>setTimeout(()=>{s.ignore.set(l),s.$=y,s.ignore.delete(l)}),{passive:!0})}else s.watch(l=>o[n]=l);else n=="id"&&!(s in h)?h[s]=o:o[n]=s});else{let n=i[Symbol.toPrimitive];if(n?.(S))o.replaceWith(...O(i));else if(n?.(x)){let s=new Text("");i.watch(d=>s.textContent=d),o.replaceWith(s)}else o.previousSibling.textContent+=i+(o.nextSibling?.textContent||""),o.nextSibling?.remove()}o.removeAttribute(a)}),r?.(h),b.children},k=document.createDocumentFragment(),v={then(e){return this.f||(this.f=e),this},[Symbol.toPrimitive](e){return typeof e=="string"?S:e===S},[Symbol.iterator]:function*(){for(let e of O(this))yield e}},Y=(e,...t)=>Object.assign({s:e,v:t},v);var R="",F={},N=u((e,t)=>Object.keys(e).forEach(r=>t.addEventListener(r,e[r],{passive:!0}))),g=new WeakMap,te=new Proxy({},{get(e,t){return t===Symbol.toPrimitive||t==="$"?N.publish():(F[t]||=u((r,f)=>{R.includes(t)||(globalThis.addEventListener(t,m=>g.get(m.target)?.[t]?.forEach?.(p=>p(m)),{passive:!0}),R+=t+"\0"),typeof r=="object"&&(r=r.fn),g.has(f)||g.set(f,{}),(g.get(f)[t]||=[]).push(r)},void 0,{name:"on."+t})).publish()}});var G={},z={},K=/[A-Z]{1}/g,Z={},q=e=>Z[e]||="-"+e.toLowerCase(),_=e=>z[e]||=e.replaceAll(K,q),A=u((e,t)=>Object.keys(e).forEach(r=>t.attributeStyleMap.set(_(r),e[r]))),J=()=>A.publish(),oe=new Proxy({},{get(e,t){return t===Symbol.toPrimitive?J:t==="$"?A.publish():(G[t]||=u((r,f)=>{f.attributeStyleMap.set(_(t),r)})).publish()}});export{u as $,oe as css,Y as h,te as on};
