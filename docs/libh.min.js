var{Array:{isArray:$},Object:{assign:j,defineProperty:_,freeze:Q},globalThis:A}=globalThis,U=A.requestAnimationFrame,R=Symbol.for("PTR_IDENTIFIER");var v={switch(){this.$=!this.$}},L=function(t){let r=m(void 0);return this.watch(o=>r.$=t(o)),r},C=t=>t,W=function*(t=52){let r;for(let o=0;o<t;o++)r=Math.floor(Math.random()*31),yield 127+r+(r>141)+(r>156)},g={},k={swap:!0,swapOf:!0,into:!0},m=(t,r=C,o)=>{let c=T+(o?.name||""),d=Symbol(c),h=e=>l.get(e)?void 0:e(t),p=e=>{t=e,s.forEach(h)},s=[],u=[],n=new WeakMap,l=new WeakMap;return g[d]=$(t)?new Proxy({element:[],reverseObjectMap:new WeakMap,reversePrimitiveMap:new Map,length:0,push(...e){e.forEach(i=>{let f=this.element.length;this.element.push(i),this[`reverse${"function object".includes(typeof i)?"Object":"Primitive"}Map`].set(i,f)})},indexOf(e,i){this[`reverse${"function object".includes(typeof e)?"Object":"Primitive"}Map`].get(e)?.index},into(e){}},{get(e,i){return typeof i=="number"?e.element[i]:i in Array.prototype||k[i]?e[i]:void 0}}):j({[Symbol.toPrimitive](e){return e===R},publish(){let e=Symbol(c);return g[e]=this,e},watch(e,i){if(i>=0){let f=setTimeout(()=>e(t),i)}else e(t);return n.set(e,{index:s.push(e)-1,timeout:i}),this},ignore:{set(e){l.set(e,!0)},delete(e){l.set(e,!1)}},abort(e){delete s[n.get(e).index||-1]},get setter(){return r},get $(){return t},set $(e){e=r(e),e instanceof Promise?e.then(p):t!==e&&(t=e,s.forEach(h))},into:L},typeof t=="boolean"?v:void 0)},T;for(;(T=String.fromCharCode(...W()))in globalThis;);_(globalThis,T,{value:t=>g[t],configurable:!1,enumerable:!1});var x=Symbol.for("PTR_IDENTIFIER"),M=Symbol.for("HTML_IDENTIFIER"),E=function*(t=16){for(let r=0;r<t;r++)yield Math.floor(Math.random()*26)+97},w=new WeakMap,H=document.createDocumentFragment(),B={then(t){return t(this.id),this},[Symbol.toPrimitive](t){return typeof t=="string"?[...this[Symbol.iterator]().map(r=>r.outerHTML)].join(""):t===M},toString(){return this[Symbol.toPrimitive]("string")}},D={get(t,r){let o=t[r];return typeof o=="function"&&o.toString().endsWith("() { [native code] }")?(...c)=>o.apply(t,c):o}},Y=(t,...r)=>{let o=w.get(t);if(!o){let s=t.join(""),u;for(;s.includes(u=String.fromCharCode(...E())););s=t.join(u);let n=Array.from(s.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${u}`,"g")).map(({0:{length:i},index:f})=>f+i)),l={},e=document.createElement("div");H.appendChild(e),e.innerHTML=s.replaceAll(u,(i,f)=>{let a;for(;s.includes(a=String.fromCharCode(...E())););return(l[a]=n.includes(f+16))?a:`<br ${a}>`}),w.set(t,o=[e,l])}let[c,d]=o,h=c.cloneNode(!0),p={};return Object.keys(d).forEach((s,u)=>{let n=h.querySelector(`[${s}]`),l=r[u];if(d[s])Reflect.ownKeys(l).forEach(e=>{let i=l[e],f=typeof e;if(f=="symbol"){let a=globalThis[e.description.slice(0,52)]?.(e);if(!a?.[Symbol.toPrimitive]?.(x))return;a.$(i,n);return}if(f=="string")if(i[Symbol.toPrimitive]?.(x))if(e=="value"&&"value"in n){let a=y=>n.value=y;i.watch(a),n.addEventListener("input",({target:{value:y}})=>setTimeout(()=>{i.ignore.set(a),i.$=y,i.ignore.delete(a)}),{passive:!0})}else i.watch(a=>n[e]=a);else e=="id"&&!(i in p)?p[i]=new Proxy(n,D):n[e]=i});else{let e=l[Symbol.toPrimitive];if(e?.(M))n.replaceWith(...l);else{let i=new Text("");n.replaceWith(i),e?.(x)?l.watch(f=>i.textContent=f):i.textContent=l}}n.removeAttribute(s)}),Object.assign(h.childNodes,B,{id:p})};var S="",F={},N=m((t,r)=>Object.keys(t).forEach(o=>r.addEventListener(o,t[o],{passive:!0}))),b=new WeakMap,O=()=>N.publish(),te=new Proxy({},{get(t,r){return r===Symbol.toPrimitive?O:r==="$"?O():(F[r]||=m((o,c)=>{S.includes(r)||(globalThis.addEventListener(r,d=>b.get(d.target)?.[r]?.forEach?.(h=>h(d)),{passive:!0}),S+=r+"\0"),typeof o=="object"&&(o=o.fn),b.has(c)||b.set(c,{}),(b.get(c)[r]||=[]).push(o)},void 0,{name:"on."+r})).publish()}});var G={},z={},K=/[A-Z]{1}/g,Z={},q=t=>Z[t]||="-"+t.toLowerCase(),P=t=>z[t]||=t.replaceAll(K,q),J=m((t,r)=>{r.style.cssText=Object.keys(t).map(o=>`${P(o)}:${t[o]};`).join("")}),I=()=>J.publish(),oe=new Proxy({},{get(t,r){return r===Symbol.toPrimitive?I:r==="$"?I():(G[r]||=m((o,c)=>{c.style[P(r)]=o})).publish()}});export{m as $,oe as css,Y as h,te as on};
