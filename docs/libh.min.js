var{Array:{isArray:j},Object:{assign:P,defineProperty:_,freeze:J},globalThis:$}=globalThis,Q=$.requestAnimationFrame,A=Symbol.for("PTR_IDENTIFIER");var R={switch(){this.$=!this.$}},v=function(t){let r=p(void 0);return this.watch(o=>r.$=t(o)),r},L=t=>t,C=function*(t=52){let r;for(let o=0;o<t;o++)r=Math.floor(Math.random()*31),yield 127+r+(r>141)+(r>156)},g={},W={swap:!0,swapOf:!0,into:!0},p=(t,r=L,o)=>{let c=T+(o?.name||""),d=Symbol(c),h=e=>l.get(e)?void 0:e(t),m=e=>{t=e,s.forEach(h)},s=[],u=[],n=new WeakMap,l=new WeakMap;return g[d]=j(t)?new Proxy({element:[],reverseObjectMap:new WeakMap,reversePrimitiveMap:new Map,length:0,push(...e){e.forEach(i=>{let f=this.element.length;this.element.push(i),this[`reverse${"function object".includes(typeof i)?"Object":"Primitive"}Map`].set(i,f)})},indexOf(e,i){this[`reverse${"function object".includes(typeof e)?"Object":"Primitive"}Map`].get(e)?.index},into(e){}},{get(e,i){return typeof i=="number"?e.element[i]:i in Array.prototype||W[i]?e[i]:void 0}}):P({[Symbol.toPrimitive](e){return e===A},publish(){let e=Symbol(c);return g[e]=this,e},watch(e,i){if(i>=0){let f=setTimeout(()=>e(t),i)}else e(t);return n.set(e,{index:s.push(e)-1,timeout:i}),this},ignore:{set(e){l.set(e,!0)},delete(e){l.set(e,!1)}},abort(e){delete s[n.get(e).index||-1]},get setter(){return r},get $(){return t},set $(e){e=r(e),e instanceof Promise?e.then(m):t!==e&&(t=e,s.forEach(h))},into:v},typeof t=="boolean"?R:void 0)},T;for(;(T=String.fromCharCode(...C()))in globalThis;);_(globalThis,T,{value:t=>g[t],configurable:!1,enumerable:!1});var E=Symbol.for("PTR_IDENTIFIER"),M=Symbol.for("HTML_IDENTIFIER"),x=function*(t=16){for(let r=0;r<t;r++)yield Math.floor(Math.random()*26)+97},w=new WeakMap,k=document.createDocumentFragment(),H={then(t){return t(this.id),this},[Symbol.toPrimitive](t){return typeof t=="string"?[...this[Symbol.iterator]().map(r=>r.outerHTML)].join(""):t===M},toString(){return this[Symbol.toPrimitive]("string")}},B={get(t,r){let o=t[r];return typeof o=="function"&&o.toString().endsWith("() { [native code] }")?(...c)=>o.apply(t,c):o}},X=(t,...r)=>{let o=w.get(t);if(!o){let s=t.join(""),u;for(;s.includes(u=String.fromCharCode(...x())););s=t.join(u);let n=Array.from(s.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${u}`,"g")).map(({0:{length:i},index:f})=>f+i)),l={},e=document.createElement("div");k.appendChild(e),e.innerHTML=s.replaceAll(u,(i,f)=>{let a;for(;s.includes(a=String.fromCharCode(...x())););return(l[a]=n.includes(f+16))?a:`<br ${a}>`}),w.set(t,o=[e,l])}let[c,d]=o,h=c.cloneNode(!0),m={};return Object.keys(d).forEach((s,u)=>{let n=h.querySelector(`[${s}]`),l=r[u];if(d[s])Reflect.ownKeys(l).forEach(e=>{let i=l[e],f=typeof e;if(f=="symbol"){let a=globalThis[e.description.slice(0,52)]?.(e);if(!a?.[Symbol.toPrimitive]?.(E))return;a.$(i,n);return}if(f=="string")if(i[Symbol.toPrimitive]?.(E))if(e=="value"&&"value"in n){let a=y=>n.value=y;i.watch(a),n.addEventListener("input",({target:{value:y}})=>setTimeout(()=>{i.ignore.set(a),i.$=y,i.ignore.delete(a)}),{passive:!0})}else i.watch(a=>n[e]=a);else e=="id"&&!(i in m)?m[i]=new Proxy(n,B):n[e]=i});else{let e=l[Symbol.toPrimitive];if(e?.(M))n.replaceWith(...l);else{let i=new Text("");n.replaceWith(i),e?.(E)?l.watch(f=>i.textContent=f):i.textContent=l}}n.removeAttribute(s)}),Object.assign(h.childNodes,H,{id:m})};var S="",D={},F=p((t,r)=>Object.keys(t).forEach(o=>r.addEventListener(o,t[o],{passive:!0}))),b=new WeakMap,ee=new Proxy({},{get(t,r){return r===Symbol.toPrimitive||r==="$"?F.publish():(D[r]||=p((o,c)=>{S.includes(r)||(globalThis.addEventListener(r,d=>b.get(d.target)?.[r]?.forEach?.(h=>h(d)),{passive:!0}),S+=r+"\0"),typeof o=="object"&&(o=o.fn),b.has(c)||b.set(c,{}),(b.get(c)[r]||=[]).push(o)},void 0,{name:"on."+r})).publish()}});var N={},G={},z=/[A-Z]{1}/g,K={},Z=t=>K[t]||="-"+t.toLowerCase(),O=t=>G[t]||=t.replaceAll(z,Z),I=p((t,r)=>Object.keys(t).forEach(o=>r.style[O(o)]=t[o])),q=()=>I.publish(),ie=new Proxy({},{get(t,r){return r===Symbol.toPrimitive?q:r==="$"?I.publish():(N[r]||=p((o,c)=>{c.style[O(r)]=o})).publish()}});export{p as $,ie as css,X as h,ee as on};
