var{Array:{isArray:q},Object:{assign:P,defineProperty:_,freeze:J},globalThis:A}=globalThis,Q=A.requestAnimationFrame,O=Symbol.for("PTR_IDENTIFIER");var R={switch(){this.$=!this.$}},L=function(t){let i=u(void 0);return this.watch(o=>i.$=t(o)),i},j=t=>t,C=function*(t=52){let i;for(let o=0;o<t;o++)i=Math.floor(Math.random()*31),yield 127+i+(i>141)+(i>156)},T={};var u=(t,i=j,o)=>{let c=E+(o?.name||""),f=Symbol(c),m=e=>a.get(e)?void 0:e(t),b=e=>{t=e,d.forEach(m)},d=[],n=[],l=new WeakMap,a=new WeakMap;return T[f]=P({[Symbol.toPrimitive](e){return e===O},publish(){let e=Symbol(c);return T[e]=this,e},watch(e,r){if(typeof r=="number"){let h=setTimeout(()=>e(t),r)}else e(t);return l.set(e,{index:d.push(e)-1,timeout:r}),this},ignore:{set(e){a.set(e,!0)},delete(e){a.set(e,!1)}},abort(e){delete d[l.get(e).index||-1]},until(e){let r;return new Promise(h=>this.watch(r=s=>{(typeof e=="function"?e(s):s===e)&&(this.abort(r),h(s))}))},get setter(){return i},get $(){return t},set $(e){e=i(e),e instanceof Promise?e.then(b):t!==e&&(t=e,d.forEach(m))},into:L},typeof t=="boolean"?R:void 0)},E;for(;(E=String.fromCharCode(...C()))in globalThis;);_(globalThis,E,{value:t=>T[t],configurable:!1,enumerable:!1});var y=Symbol.for("PTR_IDENTIFIER"),S=Symbol.for("HTML_IDENTIFIER"),B=function*(t=16){for(let i=0;i<t;i++)yield Math.floor(Math.random()*26)+97},x=new WeakMap,H=document.createDocumentFragment(),W={[Symbol.toPrimitive](t){return typeof t=="string"?[...this[Symbol.iterator]().map(i=>i.outerHTML)].join(""):t===S},toString(){return this[Symbol.toPrimitive]("string")}},v={get(t,i){let o=t[i];return typeof o=="function"&&o.toString().endsWith("() { [native code] }")?o.bind(t):o}},X=(t,...i)=>{let o=x.get(t);if(!o){let n=t.join(""),l;for(;n.includes(l=String.fromCharCode(...B())););n=t.join(l);let a=Array.from(n.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${l}`,"g")).map(({0:{length:h},index:s})=>s+h)),e=[],r=document.createElement("div");H.appendChild(r),r.innerHTML=n.replaceAll(l,(h,s)=>(e[e.length]=a.includes(s+16))?l:`<br ${l}>`),x.set(t,o=[r,e,l])}let[c,f,m]=o,b=c.cloneNode(!0),d={};return b.querySelectorAll(`[${m}]`).forEach((n,l)=>{let a=i[l];if(f[l])Reflect.ownKeys(a).forEach(e=>{let r=a[e],h=typeof e;if(h=="symbol"){let s=globalThis[e.description.slice(0,52)]?.(e);if(!s?.[Symbol.toPrimitive]?.(y))return;r[Symbol.toPrimitive]?.(y)?r.watch(p=>s.$(p,n)):s.$(r,n)}else if(h=="string")if(r[Symbol.toPrimitive]?.(y))if(e=="value"&&e in n){let s=p=>n.value=p;r.watch(s),n.addEventListener("input",({target:{value:p}})=>setTimeout(()=>{r.ignore.set(s),r.$=p,r.ignore.delete(s)}),{passive:!0})}else r.watch(s=>n[e]=s);else e=="id"&&!(r in d)?d[r]=new Proxy(n,v):n[e]=r});else{let e=a[Symbol.toPrimitive];if(e?.(S))n.replaceWith(...a);else{let r=new Text("");n.replaceWith(r),e?.(y)?a.watch(h=>r.textContent=h):r.textContent=a}}n.removeAttribute(m)}),Object.assign(b.childNodes,W,{then(n){return n(d),this}})};var w="",D={},F=u((t,i)=>Object.keys(t).forEach(o=>i.addEventListener(o,t[o],{passive:!0}))),g=new WeakMap,I=()=>F.publish(),ee=new Proxy({},{get(t,i){return i===Symbol.toPrimitive?I:i==="$"?I():(D[i]||=u((o,c)=>{w.includes(i)||(globalThis.addEventListener(i,f=>g.get(f.target)?.[i]?.forEach?.(m=>m(f)),{passive:!0}),w+=i+"\0"),typeof o=="object"&&(o=o.fn),g.has(c)||g.set(c,{}),(g.get(c)[i]||=[]).push(o)},void 0,{name:"on."+i})).publish()}});var k={},N={},G=/[A-Z]{1}/g,z={},K=t=>z[t]||="-"+t.toLowerCase(),$=t=>N[t]||=t.replaceAll(G,K),Z=u((t,i)=>i.style.cssText=Object.keys(t).map(o=>`${$(o)}:${t[o]};`).join("")),M=()=>Z.publish(),oe=new Proxy({},{get(t,i){return i===Symbol.toPrimitive?M:i==="$"?M():(k[i]||=u((o,c)=>{c.style[$(i)]=o})).publish()}});export{u as $,oe as css,X as h,ee as on};
