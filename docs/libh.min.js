var{Array:{isArray:L},Object:{assign:j,defineProperty:A,freeze:q},globalThis:_}=globalThis,J=_.requestAnimationFrame,$=Symbol.for("PTR_IDENTIFIER");var R={switch(){this.$=!this.$}},P=function(t){let r=u(void 0);return this.watch(o=>r.$=t(o)),r},v=t=>t,C=function*(t=52){let r;for(let o=0;o<t;o++)r=Math.floor(Math.random()*31),yield 127+r+(r>141)+(r>156)},g={},H={swap:!0,swapOf:!0,into:!0},u=(t,r=v,o)=>{let f=T+(o?.name||""),d=Symbol(f),h=e=>l.get(e)?void 0:e(t),m=e=>{t=e,s.forEach(h)},s=[],p=[],n=new WeakMap,l=new WeakMap;return g[d]=L(t)?new Proxy({element:[],reverseObjectMap:new WeakMap,reversePrimitiveMap:new Map,length:0,push(...e){e.forEach(i=>{let c=this.element.length;this.element.push(i),this[`reverse${"function object".includes(typeof i)?"Object":"Primitive"}Map`].set(i,c)})},indexOf(e,i){this[`reverse${"function object".includes(typeof e)?"Object":"Primitive"}Map`].get(e)?.index},into(e){}},{get(e,i){return typeof i=="number"?e.element[i]:i in Array.prototype||H[i]?e[i]:void 0}}):j({[Symbol.toPrimitive](e){return e===$},publish(){let e=Symbol(f);return g[e]=this,e},watch(e,i){if(i>=0){let c=setTimeout(()=>e(t),i)}else e(t);return n.set(e,{index:s.push(e)-1,timeout:i}),this},ignore:{set(e){l.set(e,!0)},delete(e){l.set(e,!1)}},abort(e){delete s[n.get(e).index||-1]},get setter(){return r},get $(){return t},set $(e){e=r(e),e instanceof Promise?e.then(m):t!==e&&(t=e,s.forEach(h))},into:P},typeof t=="boolean"?R:void 0)},T;for(;(T=String.fromCharCode(...C()))in globalThis;);A(globalThis,T,{value:t=>g[t],configurable:!1,enumerable:!1});var E=Symbol.for("PTR_IDENTIFIER"),S=Symbol.for("HTML_IDENTIFIER"),M=function*(t=16){for(let r=0;r<t;r++)yield Math.floor(Math.random()*26)+97},x=new WeakMap,k=document.createDocumentFragment(),W={then(t){return t(this.id),this},[Symbol.toPrimitive](t){return typeof t=="string"?[...this[Symbol.iterator]().map(r=>r.outerHTML)].join(""):t===S},toString(){return this[Symbol.toPrimitive]("string")}},U=[HTMLInputElement.prototype,HTMLSelectElement.prototype,HTMLTextAreaElement.prototype],X=(t,...r)=>{let o=x.get(t);if(!o){let s=t.join(""),p;for(;s.includes(p=String.fromCharCode(...M())););s=t.join(p);let n=Array.from(s.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${p}`,"g")).map(({0:{length:i},index:c})=>c+i)),l={},e=document.createElement("div");k.appendChild(e),e.innerHTML=s.replaceAll(p,(i,c)=>{let a;for(;s.includes(a=String.fromCharCode(...M())););return(l[a]=n.includes(c+16))?a:`<br ${a}>`}),x.set(t,o=[e,l])}let[f,d]=o,h=f.cloneNode(!0),m={};return Object.keys(d).forEach((s,p)=>{let n=h.querySelector(`[${s}]`),l=r[p];if(d[s])Reflect.ownKeys(l).forEach(e=>{let i=l[e],c=typeof e;if(c=="symbol"){let a=globalThis[e.description.slice(0,52)]?.(e);if(!a?.[Symbol.toPrimitive]?.(E))return;a.$(i,n);return}if(c=="string")if(i[Symbol.toPrimitive]?.(E))if(e=="value"&&"value"in n){let a=y=>n.value=y;i.watch(a),n.addEventListener("input",({target:{value:y}})=>setTimeout(()=>{i.ignore.set(a),i.$=y,i.ignore.delete(a)}),{passive:!0})}else i.watch(a=>n[e]=a);else e=="id"&&!(i in m)?m[i]=n:n[e]=i});else{let e=l[Symbol.toPrimitive];if(e?.(S))n.replaceWith(...l);else{let i=new Text("");n.replaceWith(i),e?.(E)?l.watch(c=>i.textContent=c):i.textContent=l}}n.removeAttribute(s)}),Object.assign(h.childNodes,W,{id:m})};var w="",B={},D=u((t,r)=>Object.keys(t).forEach(o=>r.addEventListener(o,t[o],{passive:!0}))),b=new WeakMap,ee=new Proxy({},{get(t,r){return r===Symbol.toPrimitive||r==="$"?D.publish():(B[r]||=u((o,f)=>{w.includes(r)||(globalThis.addEventListener(r,d=>b.get(d.target)?.[r]?.forEach?.(h=>h(d)),{passive:!0}),w+=r+"\0"),typeof o=="object"&&(o=o.fn),b.has(f)||b.set(f,{}),(b.get(f)[r]||=[]).push(o)},void 0,{name:"on."+r})).publish()}});var F={},N={},G=/[A-Z]{1}/g,z={},K=t=>z[t]||="-"+t.toLowerCase(),I=t=>N[t]||=t.replaceAll(G,K),O=u((t,r)=>Object.keys(t).forEach(o=>r.attributeStyleMap.set(I(o),t[o]))),Z=()=>O.publish(),ie=new Proxy({},{get(t,r){return r===Symbol.toPrimitive?Z:r==="$"?O.publish():(F[r]||=u((o,f)=>{f.attributeStyleMap.set(I(r),o)})).publish()}});export{u as $,ie as css,X as h,ee as on};
