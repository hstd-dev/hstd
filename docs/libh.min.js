var{Array:{isArray:$},Object:{assign:j,defineProperty:A,freeze:q},globalThis:R}=globalThis,J=R.requestAnimationFrame,_=Symbol.for("PTR_IDENTIFIER");var C={switch(){this.$=!this.$}},L=function(t){let i=p(void 0);return this.watch(o=>i.$=t(o)),i},v=t=>t,P=function*(t=52){let i;for(let o=0;o<t;o++)i=Math.floor(Math.random()*31),yield 127+i+(i>141)+(i>156)},y={},k={swap:!0,swapOf:!0,into:!0},p=(t,i=v,o)=>{let f=T+(o?.name||""),d=Symbol(f),h=e=>l.get(e)?void 0:e(t),m=e=>{t=e,s.forEach(h)},s=[],u=[],n=new WeakMap,l=new WeakMap;return y[d]=$(t)?new Proxy({element:[],reverseObjectMap:new WeakMap,reversePrimitiveMap:new Map,length:0,push(...e){e.forEach(r=>{let c=this.element.length;this.element.push(r),this[`reverse${"function object".includes(typeof r)?"Object":"Primitive"}Map`].set(r,c)})},indexOf(e,r){this[`reverse${"function object".includes(typeof e)?"Object":"Primitive"}Map`].get(e)?.index},into(e){}},{get(e,r){return typeof r=="number"?e.element[r]:r in Array.prototype||k[r]?e[r]:void 0}}):j({[Symbol.toPrimitive](e){return e===_},publish(){let e=Symbol(f);return y[e]=this,e},watch(e,r){if(r>=0){let c=setTimeout(()=>e(t),r)}else e(t);return n.set(e,{index:s.push(e)-1,timeout:r}),this},ignore:{set(e){l.set(e,!0)},delete(e){l.set(e,!1)}},abort(e){delete s[n.get(e).index||-1]},get setter(){return i},get $(){return t},set $(e){e=i(e),e instanceof Promise?e.then(m):t!==e&&(t=e,s.forEach(h))},into:L},typeof t=="boolean"?C:void 0)},T;for(;(T=String.fromCharCode(...P()))in globalThis;);A(globalThis,T,{value:t=>y[t],configurable:!1,enumerable:!1});var E=Symbol.for("PTR_IDENTIFIER"),x=Symbol.for("HTML_IDENTIFIER"),M=function*(t=16){for(let i=0;i<t;i++)yield Math.floor(Math.random()*26)+97},S=new WeakMap,W=document.createDocumentFragment(),B={then(t){return t(this.id),this},[Symbol.toPrimitive](t){return typeof t=="string"?x:t===x}},U=(t,...i)=>{let o=S.get(t);if(!o){let s=t.join(""),u;for(;s.includes(u=String.fromCharCode(...M())););s=t.join(u);let n=Array.from(s.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${u}`,"g")).map(({0:{length:r},index:c})=>c+r)),l={},e=document.createElement("div");W.appendChild(e),e.innerHTML=s.replaceAll(u,(r,c)=>{let a;for(;s.includes(a=String.fromCharCode(...M())););return(l[a]=n.includes(c+16))?a:`<br ${a}>`}),S.set(t,o=[e,l])}let[f,d]=o,h=f.cloneNode(!0),m={};return Object.keys(d).forEach((s,u)=>{let n=h.querySelector(`[${s}]`),l=i[u];if(d[s])Reflect.ownKeys(l).forEach(e=>{let r=l[e],c=typeof e;if(c=="symbol"){let a=globalThis[e.description.slice(0,52)]?.(e);if(!a?.[Symbol.toPrimitive]?.(E))return;a.$(r,n)}if(c=="string")if(r[Symbol.toPrimitive]?.(E))if(e=="value"&&n instanceof HTMLInputElement){let a=g=>n.value=g;r.watch(a),n.addEventListener("input",({target:{value:g}})=>setTimeout(()=>{r.ignore.set(a),r.$=g,r.ignore.delete(a)}),{passive:!0})}else r.watch(a=>n[e]=a);else e=="id"&&!(r in m)?m[r]=n:n[e]=r});else{let e=l[Symbol.toPrimitive];if(e?.(x))n.replaceWith(...l);else if(e?.(E)){let r=new Text("");l.watch(c=>r.textContent=c),n.replaceWith(r)}else n.previousSibling.textContent+=l+(n.nextSibling?.textContent||""),n.nextSibling?.remove(),n.remove()}n.removeAttribute(s)}),Object.assign(h.childNodes,B,{id:m})};var w="",D={},H=p((t,i)=>Object.keys(t).forEach(o=>i.addEventListener(o,t[o],{passive:!0}))),b=new WeakMap,V=new Proxy({},{get(t,i){return i===Symbol.toPrimitive||i==="$"?H.publish():(D[i]||=p((o,f)=>{w.includes(i)||(globalThis.addEventListener(i,d=>b.get(d.target)?.[i]?.forEach?.(h=>h(d)),{passive:!0}),w+=i+"\0"),typeof o=="object"&&(o=o.fn),b.has(f)||b.set(f,{}),(b.get(f)[i]||=[]).push(o)},void 0,{name:"on."+i})).publish()}});var F={},N={},G=/[A-Z]{1}/g,z={},K=t=>z[t]||="-"+t.toLowerCase(),I=t=>N[t]||=t.replaceAll(G,K),O=p((t,i)=>Object.keys(t).forEach(o=>i.attributeStyleMap.set(I(o),t[o]))),Z=()=>O.publish(),ie=new Proxy({},{get(t,i){return i===Symbol.toPrimitive?Z:i==="$"?O.publish():(F[i]||=p((o,f)=>{f.attributeStyleMap.set(I(i),o)})).publish()}});export{p as $,ie as css,U as h,V as on};
