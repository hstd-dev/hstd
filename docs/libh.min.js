var{Array:{isArray:$},Object:{assign:j,defineProperty:_,freeze:Q},globalThis:A}=globalThis,U=A.requestAnimationFrame,R=Symbol.for("PTR_IDENTIFIER");var L={switch(){this.$=!this.$}},C=function(t){let i=u(void 0);return this.watch(o=>i.$=t(o)),i},v=t=>t,W=function*(t=52){let i;for(let o=0;o<t;o++)i=Math.floor(Math.random()*31),yield 127+i+(i>141)+(i>156)},T={},k={swap:!0,swapOf:!0,into:!0},u=(t,i=v,o)=>{let f=x+(o?.name||""),h=Symbol(f),d=e=>c.get(e)?void 0:e(t),p=e=>{t=e,l.forEach(d)},l=[],m=[],s=new WeakMap,c=new WeakMap;return T[h]=$(t)?new Proxy({element:[],reverseObjectMap:new WeakMap,reversePrimitiveMap:new Map,length:0,push(...e){e.forEach(r=>{let a=this.element.length;this.element.push(r),this[`reverse${"function object".includes(typeof r)?"Object":"Primitive"}Map`].set(r,a)})},indexOf(e,r){this[`reverse${"function object".includes(typeof e)?"Object":"Primitive"}Map`].get(e)?.index},into(e){}},{get(e,r){return typeof r=="number"?e.element[r]:r in Array.prototype||k[r]?e[r]:void 0}}):j({[Symbol.toPrimitive](e){return e===R},publish(){let e=Symbol(f);return T[e]=this,e},watch(e,r){if(r>=0){let a=setTimeout(()=>e(t),r)}else e(t);return s.set(e,{index:l.push(e)-1,timeout:r}),this},ignore:{set(e){c.set(e,!0)},delete(e){c.set(e,!1)}},abort(e){delete l[s.get(e).index||-1]},until(e){let r;return new Promise(a=>this.watch(r=n=>{(typeof e=="function"?e(n):n===e)&&(this.abort(r),a(n))}))},get setter(){return i},get $(){return t},set $(e){e=i(e),e instanceof Promise?e.then(p):t!==e&&(t=e,l.forEach(d))},into:C},typeof t=="boolean"?L:void 0)},x;for(;(x=String.fromCharCode(...W()))in globalThis;);_(globalThis,x,{value:t=>T[t],configurable:!1,enumerable:!1});var y=Symbol.for("PTR_IDENTIFIER"),S=Symbol.for("HTML_IDENTIFIER"),E=function*(t=16){for(let i=0;i<t;i++)yield Math.floor(Math.random()*26)+97},w=new WeakMap,F=document.createDocumentFragment(),H={then(t){return t(this.id),this},[Symbol.toPrimitive](t){return typeof t=="string"?[...this[Symbol.iterator]().map(i=>i.outerHTML)].join(""):t===S},toString(){return this[Symbol.toPrimitive]("string")}},B={get(t,i){let o=t[i];return typeof o=="function"&&o.toString().endsWith("() { [native code] }")?(...f)=>o.apply(t,f):o}},Y=(t,...i)=>{let o=w.get(t);if(!o){let l=t.join(""),m;for(;l.includes(m=String.fromCharCode(...E())););l=t.join(m);let s=Array.from(l.matchAll(new RegExp(`<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))[\\s].*?${m}`,"g")).map(({0:{length:r},index:a})=>a+r)),c={},e=document.createElement("div");F.appendChild(e),e.innerHTML=l.replaceAll(m,(r,a)=>{let n;for(;l.includes(n=String.fromCharCode(...E())););return(c[n]=s.includes(a+16))?n:`<br ${n}>`}),w.set(t,o=[e,c])}let[f,h]=o,d=f.cloneNode(!0),p={};return Object.keys(h).forEach((l,m)=>{let s=d.querySelector(`[${l}]`),c=i[m];if(h[l])Reflect.ownKeys(c).forEach(e=>{let r=c[e],a=typeof e;if(a=="symbol"){let n=globalThis[e.description.slice(0,52)]?.(e);if(!n?.[Symbol.toPrimitive]?.(y))return;r[Symbol.toPrimitive]?.(y)?r.watch(b=>n.$(b,s)):n.$(r,s)}else if(a=="string")if(r[Symbol.toPrimitive]?.(y))if(e=="value"&&e in s){let n=b=>s.value=b;r.watch(n),s.addEventListener("input",({target:{value:b}})=>setTimeout(()=>{r.ignore.set(n),r.$=b,r.ignore.delete(n)}),{passive:!0})}else r.watch(n=>s[e]=n);else e=="id"&&!(r in p)?p[r]=new Proxy(s,B):s[e]=r});else{let e=c[Symbol.toPrimitive];if(e?.(S))s.replaceWith(...c);else{let r=new Text("");s.replaceWith(r),e?.(y)?c.watch(a=>r.textContent=a):r.textContent=c}}s.removeAttribute(l)}),Object.assign(d.childNodes,H,{id:p})};var M="",D={},N=u((t,i)=>Object.keys(t).forEach(o=>i.addEventListener(o,t[o],{passive:!0}))),g=new WeakMap,O=()=>N.publish(),te=new Proxy({},{get(t,i){return i===Symbol.toPrimitive?O:i==="$"?O():(D[i]||=u((o,f)=>{M.includes(i)||(globalThis.addEventListener(i,h=>g.get(h.target)?.[i]?.forEach?.(d=>d(h)),{passive:!0}),M+=i+"\0"),typeof o=="object"&&(o=o.fn),g.has(f)||g.set(f,{}),(g.get(f)[i]||=[]).push(o)},void 0,{name:"on."+i})).publish()}});var G={},z={},K=/[A-Z]{1}/g,Z={},q=t=>Z[t]||="-"+t.toLowerCase(),I=t=>z[t]||=t.replaceAll(K,q),J=u((t,i)=>i.style.cssText=Object.keys(t).map(o=>`${I(o)}:${t[o]};`).join("")),P=()=>J.publish(),oe=new Proxy({},{get(t,i){return i===Symbol.toPrimitive?P:i==="$"?P():(G[i]||=u((o,f)=>{f.style[I(i)]=o})).publish()}});export{u as $,oe as css,Y as h,te as on};
